<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News & Updates - Your Name</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            
            <!-- Navigation Links -->
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <a href="education.html" class="nav-link">Education & Career</a>
                <a href="publications.html" class="nav-link">Publications</a>
                <a href="talks.html" class="nav-link">Talks</a>
                <a href="news.html" class="nav-link active">News</a>
                <a href="service.html" class="nav-link">Service</a>
                <a href="awards.html" class="nav-link">Awards</a>
            </div>
            
            <!-- Mobile Menu Toggle -->
            <div class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Header -->
        <section class="page-header">
            <div class="container">
                <h1 class="page-title">News & Updates</h1>
                <p class="page-subtitle">Stay updated with my latest activities, achievements, and announcements</p>
            </div>
        </section>

        <!-- News Filters -->
        <section class="publication-filters">
            <div class="container">
                <div class="news-filter-buttons">
                    <button class="filter-btn active" data-filter="all">All Updates</button>
                    <button class="filter-btn" data-filter="papers">Papers & Publications</button>
                    <button class="filter-btn" data-filter="talks">Talks & Presentations</button>
                    <button class="filter-btn" data-filter="career">Career Updates</button>
                    <button class="filter-btn" data-filter="media">Media Coverage</button>
                </div>
            </div>
        </section>

        <!-- News Timeline -->
        <section class="news-timeline">
            <div class="container">
                <div class="news-container">
                    <!-- News items will be populated from data.json -->
                    <div class="loading-message">
                        <p>Loading news updates...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Your Name. All rights reserved.</p>
        </div>
    </footer>

    <script src="data-loader.js"></script>
    <script>
        // Initialize and load data for news page
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('Loading news data...');
            
            try {
                const portfolioData = new PortfolioData();
                const data = await portfolioData.loadData();
                
                console.log('Data loaded:', data);
                
                if (data) {
                    // Update title and footer with personal info
                    if (data.personal) {
                        document.title = `News & Updates - ${data.personal.name}`;
                        const footerText = document.querySelector('.footer p');
                        if (footerText) {
                            footerText.innerHTML = `&copy; 2025 ${data.personal.name}. All rights reserved.`;
                        }
                    }
                    
                    // Update news items with all recent updates
                    if (data.recent_updates) {
                        console.log('Updating news items...');
                        const newsContainer = document.querySelector('.news-container');
                        if (newsContainer) {
                            const newsHTML = portfolioData.renderNewsItems(data.recent_updates);
                            if (newsHTML) {
                                newsContainer.innerHTML = newsHTML;
                                console.log('Updated news items');
                                
                                // Initialize news filters after data is loaded
                                setTimeout(() => {
                                    initializeNewsFilters();
                                }, 200);
                            }
                        }
                    }
                    
                    console.log('News page population complete!');
                } else {
                    console.error('No data loaded for news page');
                }
            } catch (error) {
                console.error('Error loading news data:', error);
            }
        });
        
        // Function to initialize news page filters after data is loaded
        function initializeNewsFilters() {
            console.log('Initializing news filters...');
            
            const filterButtons = document.querySelectorAll('.filter-btn');
            const newsItems = document.querySelectorAll('.news-item');
            
            console.log('Found filter buttons:', filterButtons.length);
            console.log('Found news items:', newsItems.length);
            
            // Initialize filter buttons
            if (filterButtons.length > 0 && newsItems.length > 0) {
                filterButtons.forEach(button => {
                    // Remove any existing event listeners
                    const newButton = button.cloneNode(true);
                    button.parentNode.replaceChild(newButton, button);
                });
                
                // Re-select after cloning
                const freshFilterButtons = document.querySelectorAll('.filter-btn');
                freshFilterButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        console.log('News filter button clicked:', this.getAttribute('data-filter'));
                        
                        // Remove active class from all buttons
                        freshFilterButtons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        
                        const filterType = this.getAttribute('data-filter');
                        
                        // Filter news items with animation
                        newsItems.forEach(item => {
                            const itemType = item.getAttribute('data-type');
                            console.log('News item:', itemType, 'Filter:', filterType);
                            
                            if (filterType === 'all' || itemType === filterType) {
                                item.style.display = 'flex';
                                setTimeout(() => {
                                    item.style.opacity = '1';
                                    item.style.transform = 'translateY(0)';
                                }, 10);
                            } else {
                                item.style.opacity = '0';
                                item.style.transform = 'translateY(-10px)';
                                setTimeout(() => {
                                    item.style.display = 'none';
                                }, 300);
                            }
                        });
                    });
                });
                console.log('News filters initialized successfully');
            }
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
